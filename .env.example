# Copy this file to `.env.local` (for local dev) or set the same vars in your hosting provider
# Never commit your real secrets. This is only a template.

# --- Database (Neon/Postgres) ---
# Use the pooled host for app/runtime connections
# Example (Neon):
#   postgresql://USER:PASSWORD@<project>-pooler.<region>.neon.tech/<db>?sslmode=require&pgbouncer=true&connection_limit=1&pool_timeout=30
DATABASE_URL="postgresql://USER:PASSWORD@PROJECT-pooler.REGION.neon.tech/DB?sslmode=require&pgbouncer=true&connection_limit=1&pool_timeout=30"

# Use the direct (unpooled) host for migrations and long-lived operations
# Example (Neon):
#   postgresql://USER:PASSWORD@<project>.<region>.neon.tech/<db>?sslmode=require
DIRECT_URL="postgresql://USER:PASSWORD@PROJECT.REGION.neon.tech/DB?sslmode=require"

# --- Auth ---
NEXTAUTH_URL="http://localhost:3000"
NEXTAUTH_SECRET="change-me"

# --- Cron / Jobs ---
# Shared secret for scheduled jobs (e.g., Vercel Cron invoking sync endpoints)
CRON_SECRET="change-me"

# --- Jumia OIDC/API (optional: can be stored via API instead) ---
# OIDC_ISSUER="https://vendor-api.jumia.com/realms/acl"
# OIDC_CLIENT_ID="..."
# OIDC_CLIENT_SECRET="..."
# OIDC_REFRESH_TOKEN="..."
# base_url="https://vendor-api.jumia.com"
# Server
NODE_ENV=production

# NextAuth
NEXTAUTH_URL=https://ops.betech.co.ke
NEXTAUTH_SECRET=changeme-32-bytes-random

# Database (Postgres in production)
# Example: postgresql://USER:PASSWORD@HOST:PORT/DB?schema=public
DATABASE_URL=postgresql://user:password@host:5432/db?schema=public

# Google OAuth (NextAuth)
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# Jumia OIDC + API
# Prefer storing these via /api/settings/jumia (ApiCredential) in production.
# If you use envs directly, set all of them.
JUMIA_API_BASE=
JUMIA_OIDC_ISSUER=
JUMIA_CLIENT_ID=
JUMIA_CLIENT_SECRET=
JUMIA_REFRESH_TOKEN=

# Secret token to allow manual triggering of cron-only endpoints
# Used by /api/jumia/jobs/sync-incremental when called with ?cronSecret=...
CRON_SECRET=

# Interactive incremental sync lookback window (days). Used when triggered by UI/admin or without cron headers.
# Keeps fast syncs light; cron runs still use JUMIA_SYNC_LOOKBACK_DAYS (default 120).
JUMIA_SYNC_LOOKBACK_DAYS_INTERACTIVE=3

# Jumia pending orders sync window in days (DB). Defaults to 30 if unset.
# Increase if you observe older PENDING orders in vendor that are missing locally.
JUMIA_PENDING_WINDOW_DAYS=30

# KPIs: pending orders window in days for DB counts. Set 0 to include ALL pending (recommended).
# If >0, KPI count will only include pendings updated/created within the window.
KPIS_PENDING_WINDOW_DAYS=0

# KPIs: live vendor aggregation timeout and pages when boosting counts from vendor.
# Increase pages temporarily if DB is behind and you need more accurate live totals.
#KPIS_LIVE_TIMEOUT_MS=2500
#KPIS_LIVE_MAX_PAGES=4
# Prefer vendor total when it differs from DB (set to 'false' to only boost upwards)
#KPIS_PREFER_VENDOR_WHEN_DIFF=true

# Orders API: short-lived cache for PENDING (ms). Set to 0 to disable caching.
# ORDERS_PENDING_CACHE_TTL_MS=3000

# Admins (comma-separated emails)
ADMIN_EMAILS=kiokojackson81@gmail.com

# Optional: Jumia orders retention window (days)
# Used by the cleanup script `npm run cleanup:jumia-orders`.
# Defaults to 60 if not set.
JUMIA_ORDERS_RETENTION_DAYS=60
